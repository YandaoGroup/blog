<!DOCTYPE html>
<html>
<head>
    <!--
<style type="text/css">
    html {
        filter: grayscale(80%); 
        -webkit-filter: grayscale(80%); 
        -moz-filter: grayscale(80%); 
        -ms-filter: grayscale(80%); 
        -o-filter: grayscale(80%); 
        -webkit-filter: grayscale(0.96);
    }
</style>-->
<style type="text/css">
  .indeximg {
      filter: grayscale(80%); 
      -webkit-filter: grayscale(80%); 
      -moz-filter: grayscale(80%); 
      -ms-filter: grayscale(80%); 
      -o-filter: grayscale(80%); 
      -webkit-filter: grayscale(0.96);
  }
</style>
<script async src="https://umami.ydlk.cc/script.js" data-website-id="d672eae5-ce9f-4d45-91d3-194292d75a0f"></script>
<!--<script async defer src="https://analytics.umami.is/script.js" data-website-id="8fc5692e-566b-4c02-a8e5-d683560426d3"></script>-->
<!--<script defer src="/_vercel/insights/script.js"></script>
<script src="https://sdk.51.la/perf/js-sdk-perf.min.js" crossorigin="anonymous"></script>
<script>
  new LingQue.Monitor().init({id:"JvkK0PV98iBkjgQV",sendSuspicious:true});
</script>-->
<meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>长文 - 持续更新 | Gridea Pure主题魔改小记 | Kris Yan</title>

<link rel="shortcut icon" href="https://www.daoblog.top/favicon.ico?v=1689863572672">

<!--<link rel="stylesheet" type="text/css" href="https://doge.jsdelivr.daoblog.top/gh/zhheo/JS-Heo@main/mainColor/heoMainColor.css">
<link rel="stylesheet" type="text/css" href="https://doge.jsdelivr.daoblog.top/npm/js-heo@1.0.11/hidescrollbar/hidescrollbar.css">-->
<link href="https://doge.jsdelivr.daoblog.top/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://www.daoblog.top/styles/main.css">
<link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/izitoast/1.4.0/css/iziToast.min.css">
<!--<link rel="stylesheet" href="https://static.daoblog.top/5115/index.bundle.css">-->
<!-- <link rel="stylesheet" href="https://doge.jsdelivr.daoblog.top/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css"> -->

<!--<script src="https://doge.jsdelivr.daoblog.top/npm/js-heo@1.0.11/hidescrollbar/hidescrollbar.js" type="text/javascript"></script>-->
<script src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script>
<script src="https://cdnjs.loli.net/ajax/libs/izitoast/1.4.0/js/iziToast.min.js" integrity="sha512-Zq9o+E00xhhR/7vJ49mxFNJ0KQw1E1TMWkPTxrWcnpfEFDEXgUiwJHIKit93EW/XxE31HSI5GEOW06G6BF1AtA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!--<script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script>-->
<!-- <script src="https://doge.jsdelivr.daoblog.top/npm/pjax/pjax.js"></script>-->
<script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/9.12.0/languages/dockerfile.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/9.12.0/languages//dart.min.js"></script>
<script src="https://v1.hitokoto.cn/?encode=js&select=%23hitokoto&c=i&c=k" defer></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<script defer type="text/javascript" src="https://www.daoblog.top/js/console-text.js"></script>
<script src="https://doge.jsdelivr.daoblog.top/npm/pangu.simple@1.0.5/dist/browser/pangu.js"></script>
<link rel="stylesheet" href="https://www.daoblog.top/media/heomaincolor.css">
<!--<script defer type="text/javascript" src="/js/mouse.js"></script>-->
<!--<script src="https://doge.jsdelivr.daoblog.top/npm/sweetalert2@8.19.0/dist/sweetalert2.all.js"></script>
<script src="/js/lunar.js"></script>
<script src="/js/day.js"></script>-->
<!--<script async data-pjax src="https://doge.jsdelivr.daoblog.top/gh/zhheo/JS-Heo@main/rightmenu/rightmenu.js"></script>-->

<!-- 引入 Noto Serif SC 
<link type="text/css" rel="preload stylesheet" as="style" href="https://fonts.loli.net/css2?family=Noto+Serif+SC:wght@300;400;500;600;700&display=swap" crossorigin >

!-- Google font预加载&缓存 --
<link rel="dns-prefetch" href="https://fonts.loli.net/">
<link rel="dns-prefetch" href="https://gstatic.loli.net/">
 
<link rel="preconnect"  href="https://gstatic.loli.net"  crossorigin />

<noscript>
<link rel="stylesheet"  href="https://fonts.loli.net/css2?family=Noto+Serif+SC:wght@300;400;500;600;700&display=swap" onload="this.media='all'" />
</noscript>-->

<!--<link rel='stylesheet' href='https://ik.imagekit.io/chinesefonts/packages/syst/dist/SourceHanSerifCN/result.css' />-->

<!-- <link href='https://fonts.loli.net/css?family=Noto+Sans' rel='stylesheet'> -->

<!-- <script src="https://doge.jsdelivr.daoblog.top/npm/moment@2.27.0/moment.min.js"></script> -->
<!-- <script src="https://doge.jsdelivr.daoblog.top/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script> -->
<!-- <script src="https://doge.jsdelivr.daoblog.top/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script> -->
<!-- <script src="https://doge.jsdelivr.daoblog.top/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script> -->
<!-- DEMO JS -->
<!--<script src="media/scripts/index.js"></script>-->

<!--<script src="//geoip-js.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>
<script>
var foreignTips = (function () {
    var onSuccess = function (geoipResponse) {
      if (!geoipResponse.country.iso_code) {
        return;
      }
      var code = geoipResponse.country.iso_code.toLowerCase();
      if (code != 'cn'){
        iziToast.info({
            title: 'Notice',
            message: '使用国外网络访问将无法部分内容，敬请谅解。If you use foreign network access, you will not be able to access some contents.',
        });
    };
    var onError = function (error) {
    };
    return function () {
      geoip2.country(onSuccess, onError);
    };
  }()});
  foreignTips();
</script>-->

<!--<script src="https://doge.jsdelivr.daoblog.top/npm/hexo-lanternjs@1.0.0/lantern.min.js"></script>--
<link rel="manifest" href="index.webmanifest" />
!-- 老浏览器私有 meta 标签兼容 --
<script src="https://doge.jsdelivr.daoblog.top/npm/pwacompat@2.0.15/pwacompat.min.js"></script>-->

<!--<script>
  zif (localStorage.getItem('20230121') === null) ;{
    iziToast.info({
      title: 'Notice',
      message: '大陆访问困难？请访问cn.daoblog.top。点我确认知晓'
    });
    localStorage.setItem('20230121', 'true');
  }
</script>-->

<!--<script src="https://doge.jsdelivr.daoblog.top/npm/hexo-lanternjs@1.0.0/lantern.min.js"></script>-->
<!--<script src="https://doge.jsdelivr.daoblog.top/npm/vanilla-lazyload@17.8.3/dist/lazyload.min.js"></script>-->

<!-- OG -->
<meta property="og:type" content="website" />
<meta property="og:title" content="长文 - 持续更新 | Gridea Pure主题魔改小记 | Kris Yan">
<meta property="og:description" content="Personal blog website of Kris Yan">
<meta property="og:image" content="https://www.daoblog.top/OG/ogimg.jpg">
<meta property="twitter:creator" content="@YanDao0313">
<!--<meta property="og:url" content="http://www.daoblog.top/">-->

<!-- wx&qq -->
<script>
  wx.ready(function () {   //需在用户可能点击分享按钮前就先调用
  wx.updateAppMessageShareData({ 
    desc: 'Personal blog website of Kris Yan', // 分享描述
    imgUrl: 'https://www.daoblog.top/images/avatar.png', // 分享图标
    success: function () {
      console.log("TX APP Success");// 设置成功
    }
  });
  wx.updateTimelineShareData({ 
    imgUrl: 'https://www.daoblog.top/images/avatar.png', // 分享图标
    success: function () {
      console.log("TX Timeline Success");// 设置成功
    }
  });
});
</script>



    <link rel="stylesheet" href="https://doge.jsdelivr.daoblog.top/npm/katex@0.12.0/dist/katex.css">
    
        <script src="https://doge.jsdelivr.daoblog.top/npm/mermaid@9.1.1/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script> 
    
    <link rel="stylesheet" href="https://doge.unpkg.daoblog.top/@waline/client@v2/dist/waline.css"/>
    <link rel="stylesheet" href="https://doge.unpkg.daoblog.top/@waline/client@v2/dist/waline-meta.css"/>
    <!--<script src="https://cdn.zhheo.com/JS-Heo/privacy/privacy.js"></script>-->
    <script src="https://doge.jsdelivr.daoblog.top/npm/@highlightjs/cdn-assets/highlight.min.js"></script>
    <!--<script src="/js/shirokoai.js"></script>-->
</head>
<body>
<div class="main gt-bg-theme-color-first">
    <div id="lantern-wrapper" class="lantern-wrapper" no-select></div>
<nav class="navbar navbar-expand-lg">
    <a class="navbar-brand" href="/">
        <img class="user-avatar" src="/images/avatar.png" alt="头像" data-cursor="block" data-cursor-style="backdropBlur: 0; durationBackdropFilter: 500; radius: 50%" >
        <div class="site-name gt-c-content-color-first" data-cursor="block" data-cursor-style="backdropBlur: 0; durationBackdropFilter: 500">
            Kris Yan
        </div>
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" id="changeNavbar">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
            <div class="nav-item">
                
                <a href="/" class="menu gt-a-link" data-cursor="block">
                    首页
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/archives" class="menu gt-a-link" data-cursor="block">
                    归档
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/tags" class="menu gt-a-link" data-cursor="block">
                    标签
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/friends" class="menu gt-a-link" data-cursor="block">
                    友链
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="https://yandaostatus.statuspage.io/" class="menu gt-a-link" target="_blank" data-cursor="block">
                    状态
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/post/about" class="menu gt-a-link" data-cursor="block">
                    关于
                </a>
                
            </div>
            
        </div>
        <div style="text-align: center" data-cursor="text">
            <form id="gridea-search-form" style="position: relative" data-update="1689863572672"
                action="/search/">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="搜索文章" />
                <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
            <!--<script async src="https://cse.google.com/cse.js?cx=c77ab7baf59fb4f8f"></script>
            <div class="gcse-search"></div>-->
        </div>
    </div>
</nav>
<script>
    /* 移动端导航栏展开/收起切换 */
    document.getElementById('changeNavbar').onclick = () => {
        var element = document.getElementById('navbarSupportedContent');
        if (element.style.display === 'none' || element.style.display === '') {
            element.style.display = 'block';
        } else {
            element.style.display = 'none';
        }
    }
</script>

    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second" style="border-radius: 10px;">
            <article class="gt-post-content">
                <h2 class="post-title" data-cursor="text">
                    长文 - 持续更新 | Gridea Pure主题魔改小记
                </h2>
                <div class="post-info">
                    <a href='javascript:AutoHan_StranBody()' id='StranLink' data-cursor="block">切换繁体</a>
                    <time class="post-time gt-c-content-color-first" data-cursor="text">
                        · 2022-12-29 ·
                    </time>
                    
                        <a href="https://www.daoblog.top/tag/gridea/" class="post-tags" data-cursor="block">
                            # gridea
                        </a>
                    
                        <a href="https://www.daoblog.top/tag/notes/" class="post-tags" data-cursor="block">
                            # notes
                        </a>
                    
                        <a href="https://www.daoblog.top/tag/github/" class="post-tags" data-cursor="block">
                            # github
                        </a>
                    
                        <a href="https://www.daoblog.top/tag/tech/" class="post-tags" data-cursor="block">
                            # tech
                        </a>
                    
                </div>
                <div class="post-content">
                    <!--<div class="post-ai">
                        <div class="ai-title">
                            <i class="heofont icon-jiqiren ai-title-icon tianliGPT-title-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="48px" height="48px" viewBox="0 0 48 48">
                                    <title>机器人</title>
                                        <g id="机器人" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <path d="M34.717885,5.03561087 C36.12744,5.27055371 37.079755,6.60373651 36.84481,8.0132786 L35.7944,14.3153359 L38.375,14.3153359 C43.138415,14.3153359 47,18.1768855 47,22.9402569 L47,34.4401516 C47,39.203523 43.138415,43.0650727 38.375,43.0650727 L9.625,43.0650727 C4.861585,43.0650727 1,39.203523 1,34.4401516 L1,22.9402569 C1,18.1768855 4.861585,14.3153359 9.625,14.3153359 L12.2056,14.3153359 L11.15519,8.0132786 C10.920245,6.60373651 11.87256,5.27055371 13.282115,5.03561087 C14.69167,4.80066802 16.024865,5.7529743 16.25981,7.16251639 L17.40981,14.0624532 C17.423955,14.1470924 17.43373,14.2315017 17.43948,14.3153359 L30.56052,14.3153359 C30.56627,14.2313867 30.576045,14.1470924 30.59019,14.0624532 L31.74019,7.16251639 C31.975135,5.7529743 33.30833,4.80066802 34.717885,5.03561087 Z M38.375,19.4902885 L9.625,19.4902885 C7.719565,19.4902885 6.175,21.0348394 6.175,22.9402569 L6.175,34.4401516 C6.175,36.3455692 7.719565,37.89012 9.625,37.89012 L38.375,37.89012 C40.280435,37.89012 41.825,36.3455692 41.825,34.4401516 L41.825,22.9402569 C41.825,21.0348394 40.280435,19.4902885 38.375,19.4902885 Z M14.8575,23.802749 C16.28649,23.802749 17.445,24.9612484 17.445,26.3902253 L17.445,28.6902043 C17.445,30.1191812 16.28649,31.2776806 14.8575,31.2776806 C13.42851,31.2776806 12.27,30.1191812 12.27,28.6902043 L12.27,26.3902253 C12.27,24.9612484 13.42851,23.802749 14.8575,23.802749 Z M33.1425,23.802749 C34.57149,23.802749 35.73,24.9612484 35.73,26.3902253 L35.73,28.6902043 C35.73,30.1191812 34.57149,31.2776806 33.1425,31.2776806 C31.71351,31.2776806 30.555,30.1191812 30.555,28.6902043 L30.555,26.3902253 C30.555,24.9612484 31.71351,23.802749 33.1425,23.802749 Z" id="形状结合" fill="#444444" fill-rule="nonzero"></path>
                                        </g>
                                </svg>
                            </i>
                            <div class="ai-title-text">AI摘要</div>
                            <div id="ai-Toggle">切换</div>
                            <div class="ai-tag" id="ai-tag">ShirokoAI</div>
                        </div>
                        <div class="ai-explanation" style="display: block;">
                            老师，请再等等哦~
                        </div>
                        <div class="ai-suggestions"></div>
                    </div>-->
                    <div class="note-TianliGPT"><div class="tianliGPT-title">
                        <i class="tianliGPT-title-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="48px" height="48px" viewBox="0 0 48 48">
                                <title>机器人</title>
                                    <g id="机器人" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-cursor="block">
                                        <path d="M34.717885,5.03561087 C36.12744,5.27055371 37.079755,6.60373651 36.84481,8.0132786 L35.7944,14.3153359 L38.375,14.3153359 C43.138415,14.3153359 47,18.1768855 47,22.9402569 L47,34.4401516 C47,39.203523 43.138415,43.0650727 38.375,43.0650727 L9.625,43.0650727 C4.861585,43.0650727 1,39.203523 1,34.4401516 L1,22.9402569 C1,18.1768855 4.861585,14.3153359 9.625,14.3153359 L12.2056,14.3153359 L11.15519,8.0132786 C10.920245,6.60373651 11.87256,5.27055371 13.282115,5.03561087 C14.69167,4.80066802 16.024865,5.7529743 16.25981,7.16251639 L17.40981,14.0624532 C17.423955,14.1470924 17.43373,14.2315017 17.43948,14.3153359 L30.56052,14.3153359 C30.56627,14.2313867 30.576045,14.1470924 30.59019,14.0624532 L31.74019,7.16251639 C31.975135,5.7529743 33.30833,4.80066802 34.717885,5.03561087 Z M38.375,19.4902885 L9.625,19.4902885 C7.719565,19.4902885 6.175,21.0348394 6.175,22.9402569 L6.175,34.4401516 C6.175,36.3455692 7.719565,37.89012 9.625,37.89012 L38.375,37.89012 C40.280435,37.89012 41.825,36.3455692 41.825,34.4401516 L41.825,22.9402569 C41.825,21.0348394 40.280435,19.4902885 38.375,19.4902885 Z M14.8575,23.802749 C16.28649,23.802749 17.445,24.9612484 17.445,26.3902253 L17.445,28.6902043 C17.445,30.1191812 16.28649,31.2776806 14.8575,31.2776806 C13.42851,31.2776806 12.27,30.1191812 12.27,28.6902043 L12.27,26.3902253 C12.27,24.9612484 13.42851,23.802749 14.8575,23.802749 Z M33.1425,23.802749 C34.57149,23.802749 35.73,24.9612484 35.73,26.3902253 L35.73,28.6902043 C35.73,30.1191812 34.57149,31.2776806 33.1425,31.2776806 C31.71351,31.2776806 30.555,30.1191812 30.555,28.6902043 L30.555,26.3902253 C30.555,24.9612484 31.71351,23.802749 33.1425,23.802749 Z" id="形状结合" fill="#444444" fill-rule="nonzero"></path>
                                    </g>
                            </svg>
                        </i>
                        <div class="tianliGPT-title-text" data-cursor="text">AI生成的内容仅供参考，不代表文章全部内容及本人立场</div>
                        <div class="tianliGPT-tag" id="tianliGPT-tag" data-cursor="block">Tip</div>
                    </div>
                </div>
                <div data-cursor="text">
                    <blockquote>
<p>从入门到车门焊死（确信）[更新于2023.02.05]</p>
</blockquote>
<!-- more -->
<blockquote>
<p>本文更新于<code>2023.06.16</code>，最初写作于<code>2022.12.29</code><br>
主题ChangeLog页面已经上线，请前往<a href="https://www.daoblog.top/post/changelog">此处</a>查看，本文将不再更新。<br>
另附：写作本文的目的只是记录，不是教程。本人人菜瘾大，技术十分之有限，写的代码非常之烂，都是本着能用就行写的，所以请大佬手下留情 QwQ</p>
</blockquote>
<h2 id="文章目录">文章目录</h2>
<p><ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">文章目录</a></li>
<li><a href="#%E8%B5%B7%E5%9B%A0">起因</a></li>
<li><a href="#%E6%8A%98%E8%85%BE%E4%B9%8B%E8%B7%AF">折腾之路</a>
<ul>
<li><a href="#%E6%8E%A8%E8%8D%90%E6%96%87%E6%A1%A3">推荐文档</a></li>
<li><a href="#valine-to-waline">valine to waline</a></li>
<li><a href="#%E5%BC%95%E5%85%A5umami%E7%BB%9F%E8%AE%A1">引入umami统计</a></li>
<li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AD%97%E4%BD%93">自定义字体</a></li>
<li><a href="#%E6%90%AD%E5%BB%BA%E8%AF%B4%E8%AF%B4%E9%A1%B5%E9%9D%A2">搭建说说页面</a></li>
<li><a href="#%E4%B8%BA%E4%B8%BB%E9%A1%B5%E6%B7%BB%E5%8A%A0%E8%AF%B4%E8%AF%B4%E8%B7%B3%E8%BD%AC%E5%BC%95%E5%AF%BC">为主页添加说说跳转引导</a></li>
<li><a href="#%E6%90%AD%E5%BB%BA%E5%8F%8B%E9%93%BE%E6%9C%8B%E5%8F%8B%E5%9C%88">搭建友链朋友圈</a></li>
<li><a href="#%E9%98%B2%E6%AD%A2%E8%BF%9B%E5%85%A5%E6%80%AA%E5%BC%82%E6%A8%A1%E5%BC%8F">防止进入“怪异模式”</a></li>
<li><a href="#index%E6%96%87%E7%AB%A0%E5%9D%97%E6%B7%BB%E5%8A%A0%E8%B6%85%E9%93%BE%E6%8E%A5">index文章块添加超链接</a></li>
<li><a href="#%E6%B7%BB%E5%8A%A0%E9%A1%B6%E9%83%A8%E5%8A%A0%E8%BD%BD%E8%BF%9B%E5%BA%A6%E6%9D%A1">添加顶部加载进度条</a></li>
<li><a href="#%E6%B7%BB%E5%8A%A0%E8%BF%94%E5%9B%9E%E9%A1%B6%E9%83%A8%E6%8C%89%E9%92%AE">添加“返回顶部”按钮</a></li>
<li><a href="#%E4%B8%BA%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%B7%BB%E5%8A%A0%E5%AD%97%E7%AC%A6%E7%94%BB">为控制台添加字符画</a></li>
<li><a href="#%E6%8E%92%E7%89%88%E8%87%AA%E5%8A%A8%E4%BC%98%E5%8C%96">排版自动优化</a></li>
<li><a href="#%E4%B8%BA%E7%BD%91%E7%AB%99%E5%BA%95%E9%83%A8%E6%B7%BB%E5%8A%A0%E8%BF%90%E8%A1%8C%E6%97%B6%E9%97%B4">为网站底部添加运行时间</a></li>
<li><a href="#%E6%B7%BB%E5%8A%A0%E8%87%AA%E5%AE%9A%E4%B9%89%E9%BC%A0%E6%A0%87%E6%8C%87%E9%92%88">添加自定义鼠标指针</a></li>
<li><a href="#%E6%B7%BB%E5%8A%A0%E5%A4%8D%E5%88%B6%E5%BC%B9%E7%AA%97">添加复制弹窗</a></li>
<li><a href="#%E6%9B%BF%E6%8D%A2%E4%B8%BA%E5%8A%A8%E6%80%81%E5%8F%8B%E9%93%BEgithub-pr%E6%8F%90%E4%BA%A4%E5%8F%8B%E9%93%BE">替换为动态友链+GitHub PR提交友链</a></li>
<li><a href="#instantpage%E9%A1%B5%E9%9D%A2%E5%8A%A0%E9%80%9F">instant.page页面加速</a></li>
</ul>
</li>
<li><a href="#whats-next">What's next?</a></li>
</ul>
</li>
</ul>
</p>
<blockquote>
<p>要在Gridea中插入自动生成的目录，只需在合适的地方输入<code>@[toc]</code>即可，大小写<strong>不敏感</strong></p>
</blockquote>
<hr>
<h2 id="起因">起因</h2>
<p>对于Gridea Pure这款主题的魔改，最初是起源于最基础的一个需求——把评论系统换成waline，结果这就像打开了潘多拉的魔盒一般，一发不可收拾。</p>
<p>替换掉valine的目的很简单，因为我不想把自己leancloud的<code>APPID</code>与<code>APPKEY</code>直接暴露在网页的源码中，这样做会有安全隐患，何况valine目前作者并不打算重新开源，也遗留有一些安全问题，使得我总是不放心评论系统的安全，再加上waline在官方文档中说明：</p>
<blockquote>
<p>由于 Waline 在存储上完全复用了 Valine 的数据结构，所以从 Valine 迁移至 Waline 非常简单。</p>
</blockquote>
<p>这就很令人心动了，一不做，二不休，在阅读完Gridea官网的简要说明之后，直接点开主题目录的<code>templates</code>下的<code>includes</code>文件夹，看到<code>valine.ejs</code>，点进去直接开干！</p>
<blockquote>
<p>⚠️ 注意：我的魔改方式<strong>多为硬编码</strong>，好处是修改起来十分方便，思维量小，代价也很明显，相当于是直接放弃了未来升级主题的可能性，这需要你来做出取舍再决定要不要“抄我的作业”。</p>
</blockquote>
<h2 id="折腾之路">折腾之路</h2>
<h3 id="推荐文档">推荐文档</h3>
<blockquote>
<p>事实证明，有看文档的习惯，可以<strong>避免</strong>像我刚开始改造时一样走一大堆弯路。</p>
</blockquote>
<p><a href="https://gridea.dev/theme-structure/">Gridea 主题目录结构与页面变量</a></p>
<p><a href="https://github.com/getgridea/gridea/tree/master/public/default-files/themes">Gridea 内置主题代码结构</a></p>
<p>张洪哥的 <a href="https://butterfly.zhheo.com/">Butterfly主题美化教程</a> 具有很大的参考价值</p>
<hr>
<h3 id="valine-to-waline">valine to waline</h3>
<blockquote>
<p>waline的后端部署请参考<a href="https://waline.js.org/guide/get-started/">官方文档</a></p>
</blockquote>
<p>这里的替换是十分简单的，只需要注释掉原有valine的引入代码和div组件，替换成waline对应的内容，然后修改style区域内的内容，确保其能正确映射到waline的div上，最后在head.ejs中引入脚本与css文件就完事了，配置我就直接把之前用hexo的时候写的直接拿过来了，下面是参考代码。</p>
<p><em>Tip：别忘了在<code>head.ejs</code>或<code>post.ejs</code>中引入需要的文件哦。</em></p>
<pre><code class="language-html">&lt;style&gt;
	div#waline{
		width:&lt;%=site.customConfig['vPercentWidth']%&gt;%;
		max-width: &lt;%=site.customConfig['vMaxWidth']%&gt;px;
		padding: &lt;%=site.customConfig['vPadding']%&gt;
	}
	:root {
        --waline-font-size: 18px;
    }
	span.katex { font-size: 18px; }
	.wl-emoji-popup { font-size: 16px !important; }
	.wl-emoji-popup button { height: 2em; }
&lt;/style&gt;

&lt;% if(site.customConfig['valine']) { %&gt;
	&lt;div id=&quot;waline&quot;&gt;&lt;/div&gt;
&lt;% } %&gt;
&lt;script type=&quot;module&quot;&gt;
	import { init } from 'https://unpkg.com/@waline/client@v2/dist/waline.mjs';
	init({
      el: '#waline',
      serverURL: 'https://waline.ydlk.cc',
	  avatar: '&lt;%=site.customConfig['avatar']%&gt;',
	  recordIp: &lt;%=site.customConfig['recordIp']%&gt;,
	  reaction: true,
	  pageview: true,
	  comment: true,
	  emoji: [
      '//unpkg.com/@waline/emojis@1.1.0/bmoji',
      '//unpkg.com/@waline/emojis@1.1.0/bilibili',
	  '//cdn.jsdelivr.net/npm/sticker-heo@2022.7.5/Sticker-100/',
    ],
	reaction: [
    'https://unpkg.com/@waline/emojis@1.1.0/bilibili/bb_sunglasses.png',
    'https://unpkg.com/@waline/emojis@1.1.0/bilibili/bb_thumbsup.png',
    'https://unpkg.com/@waline/emojis@1.1.0/bilibili/bb_doge.png',	
	'https://unpkg.com/@waline/emojis@1.1.0/bilibili/bb_confused.png',
	'https://unpkg.com/@waline/emojis@1.1.0/bilibili/bb_sweat.png',
    'https://unpkg.com/@waline/emojis@1.1.0/bilibili/bb_sleepy.png',
  ],
	  dark: false,
      recaptchaV3Key: &quot;写成你的，我自己开了的&quot;,
    });
&lt;/script&gt;
</code></pre>
<p>我个人建议你把waline需要额外引入的内容放在<code>post.ejs</code>中的<code>head</code>部分。</p>
<blockquote>
<p>waline的js引入也可以更换为<code>https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/waline/1.5.4/Waline.min.js</code>，字节跳动的cdn源，<strong>大陆友好</strong></p>
</blockquote>
<p>我站开启的评论登录提示的代码如下，插入在任意位置即可：</p>
<pre><code class="language-html">&lt;script&gt;
    var versionNo = '1.1.1';
    if(!window.localStorage.getItem('update-version') || window.localStorage.getItem('update-version') !=versionNo){
        window.localStorage.setItem('update-version',versionNo)
        alert('友情提示：我站已强制开启评论验证，请先在评论区点击登录，再进行评论，否则无法使用评论')
    }
&lt;/script&gt;
</code></pre>
<p><a href="/post/gridea-modify-2022/#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">&gt;返回目录</a></p>
<hr>
<h3 id="引入umami统计">引入umami统计</h3>
<p>打开与<code>valine.ejs</code>同目录下的<code>head.ejs</code>，我注释掉了谷歌统计的的代码，然后直接添加了umami的统计代码，除自己写的页面外，其余直接全局生效，这一步没有什么技术含量。</p>
<p>换成umami是因为它可以私有部署，而且界面简洁美观，至于谷歌统计......我相信你不会想跟那个看起来停留在上个世纪的历史悠久的产物打交道。</p>
<blockquote>
<p>为什么我特别指出要<strong>注释掉</strong>原来的代码呢？这是为了避免日后出现稀奇古怪的问题时，自己还能人工回滚到原来的版本，虽然我的gridea工作目录也在使用git进行多版本管理，但是谁又能知道“明天与意外哪个先来”呢，对吧？</p>
</blockquote>
<p><a href="/post/gridea-modify-2022/#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">&gt;返回目录</a></p>
<hr>
<h3 id="自定义字体">自定义字体</h3>
<p>我的方法是通过修改主题目录下<code>assets</code>文件夹中<code>styles</code>文件夹下的<code>main.less</code>实现。本站就是修改为了谷歌的<code>Noto Serif SC</code>（使用loli.net提供的大陆可访问源）。</p>
<blockquote>
<p>👨‍💻 注意：Pure主题其实提供了自定义CSS的入口，<strong>再次强调</strong>，我的这种方案<mark>没有考虑</mark>未来升级时兼容性，纯纯的<strong>硬编码</strong>，需要你<strong>做出取舍</strong>再决定要不要“抄作业”</p>
</blockquote>
<p>首先在<code>main.less</code>文件的开头，我引入了字体的css内容：</p>
<pre><code class="language-less">@import url('https://fonts.loli.net/css2?family=Noto+Serif+SC:wght@300;400;500;600;700&amp;display=swap');
</code></pre>
<p>接着，跳转到文件的第22行左右，看到<code>font-family</code>了吗？在最开头加上<code>Noto Serif SC</code>就生效了。这时这几行会变成这样：</p>
<pre><code class="language-less">body {
  font-family: &quot;Noto Serif SC&quot;, &quot;PingFang SC&quot;, -apple-system, BlinkMacSystemFont, opensans, Optima, 'Microsoft Yahei', sans-serif;
  font-size: 16px;
  letter-spacing: 0px;
}
</code></pre>
<p>但同时，我们也发现字与字之间的间隔过大，这是由于原来的主题为了适配原有字体而做出的变动，如果你并不打算继续完美兼容默认字体，那么可以<code>crtl+F</code>搜索全文，将与展示效果有关的<code>letter-spacing</code>项后的数值调整为<code>0px</code>，此时的效果就与我的网站相近了</p>
<blockquote>
<p>下面是一种据说可以提高加载速度的代码，加在<code>&lt;head&gt;</code>与<code>&lt;/head&gt;</code>之间，实测似乎有效（？</p>
</blockquote>
<pre><code class="language-html">&lt;!-- 引入 Noto Serif SC --&gt;
&lt;link type=&quot;text/css&quot; rel=&quot;preload stylesheet&quot; as=&quot;style&quot; href=&quot;https://fonts.loli.net/css2?family=Noto+Serif+SC:wght@300;400;500;600;700&amp;display=swap&quot; crossorigin &gt;

&lt;!-- Google font预加载&amp;缓存 --&gt;
&lt;link rel=&quot;dns-prefetch&quot; href=&quot;https://fonts.loli.net/&quot;&gt;
&lt;link rel=&quot;dns-prefetch&quot; href=&quot;https://gstatic.loli.net/&quot;&gt;
 
&lt;link rel=&quot;preconnect&quot;  href=&quot;https://gstatic.loli.net&quot;  crossorigin /&gt;

&lt;noscript&gt;
&lt;link rel=&quot;stylesheet&quot;  href=&quot;https://fonts.loli.net/css2?family=Noto+Serif+SC:wght@300;400;500;600;700&amp;display=swap&quot; onload=&quot;this.media='all'&quot; /&gt;
&lt;/noscript&gt;
</code></pre>
<p>其实本来是想用思源宋体的，但我的Adobe账号是国区，用不了Fonts服务，就只能上Google的<code>Noto Serif</code>家族了，其实也就是思源黑体😂</p>
<p>除此之外，我还<strong>调整了字体大小</strong>，这样可以使大屏的浏览体验更好（注：笔者本人自用宏碁的<code>XV272U</code>显示器，27寸2K144Hz）。</p>
<p><s>对于页面本身而言，按理说直接在<code>main.less</code>上动刀就可以了，此部分按照你的喜好来，<mark>但是</mark>我尝试将正文字体大小修改为了<code>18px</code>，<strong>并没有生效</strong>，还在研究中......</s></p>
<p>主题目录下的<code>assets - styles - components</code>这个路径一路点进去，根据你要修改的部分，选择对应的<code>.less</code>文件下刀就可以了，对于字体大小而言，你要关注的是<code>font-size</code>属性。其他两个文件夹下的文件同理，按需修改即可，不过目前似乎对正文文本大小的修改仍是无解状态...</p>
<p>对于<code>waline</code>评论系统而言，引入支持的css变量即可：</p>
<pre><code class="language-css">:root {
        --waline-font-size: 18px;
    }
span.katex { font-size: 18px; }
.wl-emoji-popup { font-size: 16px !important; }
.wl-emoji-popup button { height: 2em; }
</code></pre>
<p>在本例中，你最关心的文本大小为<code>18px</code></p>
<p><a href="/post/gridea-modify-2022/#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">&gt;返回目录</a></p>
<hr>
<h3 id="搭建说说页面">搭建说说页面</h3>
<blockquote>
<p>⚠️ 注意：我的这种办法虽然省事，但是<strong>很蠢</strong>，而且除了css外，其他的<mark>不能</mark>随其他页面一起<mark>动态更新</mark>，请自行斟酌<br>
<strong>警告</strong> 请<mark>不要</mark>让valine与artitalk在同一个页面上出现！出现<mark>离奇的bug</mark>后果自负！</p>
</blockquote>
<p>首先，你需要一份已经Gridea渲染好了的html文件，此处我的站点根目录下的以<code>index.html</code>为例</p>
<blockquote>
<p>你可以在GitHub组织<code>YandaoGroup</code>的<code>daoblog.top</code>仓库找到我的站点的静态文件</p>
</blockquote>
<p>就我写作这篇文章时而言，我复制了从第一行到第一百六十二行的内容，也就是从<code>&lt;!DOCTYPE html&gt;</code>到<code>&lt;/script&gt;</code>之间的全部，然后针对性的删除了一些不需要的引入，例如waline相关的css/js等，然后复制了页脚相关的内容，<strong>因为每个人实际生成出来的站点都不尽相同，还请你意会一下</strong></p>
<p>值得一提的是，我建议你<strong>提前配置好菜单</strong>，接着生成一次页面，再去复制，以免页面写好了之后又得去手动改一遍菜单。</p>
<p>关于菜单的配置，我在这里将“说说”项配置为跳转到<code>/shuoshuo</code>这里，实际效果等同于<code>https://www.daoblog.top/shuoshuo</code>这个url。</p>
<p>那么，要求编写时的思维量小，我们的html文件应当放在哪里呢？</p>
<p>打开Gridea的工作目录，这里有一个<code>static</code>文件夹，在这里面存放的内容都会原封不动的输出到最终站点的根目录下，包括新建的文件夹，所以，我们可以在这里先新建一个名为<code>shuoshuo</code>的文件夹，再在其内部新建<code>index.html</code>，开始编辑就好了。</p>
<blockquote>
<p>小Tip：不要忘记修改页面标题哦~</p>
</blockquote>
<p>在适配移动端导航栏的<code>script</code>之后、<code>&lt;/body&gt;</code>标签之前的部分，就是我们最主要的内容的部分。</p>
<p>在本例中，我们使用<code>safemode</code>模式下的<code>artitalk.js</code>作为说说页面的框架，我插入的代码如下：</p>
<pre><code class="language-html">&lt;style&gt;
    body {background-color:#F9F9F9;}
	div#artitalk_main{
	    width:100%;
	    max-width: 1050px;
	    padding: 2.5%;
        margin: auto;
	}
&lt;/style&gt;
&lt;br /&gt;
&lt;div class=&quot;post-container&quot;&gt;
   &lt;div class=&quot;post-detail gt-bg-theme-color-first&quot;&gt;
        &lt;article class=&quot;gt-post-content&quot;&gt;
            &lt;div id=&quot;artitalk_main&quot;&gt;&lt;/div&gt;
            &lt;script&gt;
            new Artitalk({
                serverURL: 'https://artitalk.ydlk.cc',
                appId: '114514',
                appKey: '1919810',
                color1: '#F3F3F3',
                color2: '#F3F3F3',
                color3: '#6C6C6C',
            })
            &lt;/script&gt;
            &lt;!--注意：在此模式下，可以在前端随意仿冒appid与appkey--&gt;
            &lt;br /&gt;
        &lt;/article&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>插入<code>&lt;br /&gt;</code>换行是为了增加与导航栏的距离，使页面更美观，你可以根据个人想法自由调整，额外添加<code>&lt;style&gt;</code>以及套了几层<code>div</code>与<code>article</code>也是为了更改它的一些样式，使其整体更美观</p>
<blockquote>
<p>👨‍💻 注意：这些美化内容你也可以自定义成别的，我的方案不可能是最好的，请你自行斟酌</p>
</blockquote>
<p><a href="/post/gridea-modify-2022/#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">&gt;返回目录</a></p>
<hr>
<h3 id="为主页添加说说跳转引导">为主页添加说说跳转引导</h3>
<blockquote>
<p>再次重申：<s>芝士</s><strong>这是硬编码</strong>，上车之前需谨慎！</p>
</blockquote>
<p>打开<code>index.ejs</code>，在<code>&lt;%- include('./includes/header') %&gt;</code>与<code>&lt;%- include('./includes/post-list') %&gt;</code>添加如下内容：</p>
<pre><code class="language-html">&lt;div class=&quot;post-list-container&quot;&gt;
    &lt;div class=&quot;post-inner&quot;&gt;
        &lt;div class=&quot;post gt-bg-theme-color-second&quot; onclick=&quot;window.open('/shuoshuo/','_self')&quot;&gt;
            &lt;div class=&quot;post-left&quot;&gt;
                &lt;a href=&quot;/shuoshuo/&quot;&gt;&lt;span class=&quot;sticky-top-flag gt-bg-accent-color-first&quot;&gt;说说&lt;/span&gt;&lt;span class=&quot;post-title gt-c-content-color-first&quot; style=&quot;font-weight:bold&quot;&gt;   再见2022，你好2023！&lt;/span&gt;&lt;/a&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>套多层div与奇怪的a标签位置是为了适配原有的文章卡片的设计和css，代码中的<code>/shuoshuo/</code>为你说说页面的相对路径（相对于根目录而言，例如本例中就实际指向了根目录下的名为<code>shuoshuo</code>的文件夹）</p>
<p>我对第二个span内的字符进行了加粗处理，使其更为美观</p>
<p>首页的“早报”跳转引导，也是一样的思路喔！我添加的代码如下：</p>
<pre><code class="language-html">&lt;div class=&quot;post-left&quot;&gt;
    &lt;a href=&quot;https://news.ydlk.cc/&quot;&gt;&lt;span class=&quot;sticky-top-flag gt-bg-accent-color-first&quot;&gt;早报&lt;/span&gt;&lt;span class=&quot;post-title gt-c-content-color-first&quot; style=&quot;font-weight:bold&quot;&gt;   每早一分钟，带你读懂世界。&lt;/span&gt;&lt;embed src=&quot;/link.svg&quot; type=&quot;image/svg+xml&quot; height=&quot;14&quot; /&gt;&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<blockquote>
<p>现在使用的版本中还加入了链接的小图标，实际是嵌入了一个svg文件，在<code>&lt;/a&gt;</code>之前，内容如下：<br>
<code>&lt;embed src=&quot;/link.svg&quot; type=&quot;image/svg+xml&quot; height=&quot;14&quot; /&gt;</code><br>
svg来自iconfont，放在站点根目录，在文件中修改了<code>fill</code>属性为<code>#8B959F</code>，以适配主题颜色。<br>
<a href="/post/gridea-modify-2022/#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">&gt;返回目录</a></p>
</blockquote>
<hr>
<h3 id="搭建友链朋友圈">搭建友链朋友圈</h3>
<p>文件的前期准备同搭建说说页面。</p>
<blockquote>
<p>👨‍💻 In writing...</p>
</blockquote>
<p><a href="/post/gridea-modify-2022/#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">&gt;返回目录</a></p>
<hr>
<h3 id="防止进入怪异模式">防止进入“怪异模式”</h3>
<p><code>&lt;!DOCTYPE html&gt;</code>真的很重要！如果你和我一样正在使用Pure这款主题的话，那么你可能会在浏览器的lighthouse中发现让你添加这一行代码的提示。</p>
<p>没有这一行代码，浏览器可能就会进入“怪异模式”，这是一些网页浏览器为了维持对较旧的网页设计的向后兼容性，而使用的一种技术，代价显而易见——许多渲染问题的产生，为了避免出现这一大堆问题，这一行代码最好还是自行补起。</p>
<p>只需要在html的文档最开头插入这一行就好了，类似于下面这样：</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;zh&quot;&gt;
&lt;head&gt;
    ......
&lt;/head&gt;
......
</code></pre>
<p>对于今天的主角——Gridea的Pure主题而言，受影响的有：<code>about.ejs</code> <code>archives.ejs</code> <code>friends.ejs</code> <code>index.ejs</code> <code>post.ejs</code> <code>search.ejs</code> <code>tag.ejs</code>以及<code>tags.ejs</code>......</p>
<p><a href="/post/gridea-modify-2022/#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">&gt;返回目录</a></p>
<hr>
<h3 id="index文章块添加超链接">index文章块添加超链接</h3>
<p>你可能会注意到，在站点首页只有点击文章的标题才能跳转至对应文章，电脑上浏览可能还在接受范围之内，但是用户在手机上的体验就会十分别扭。</p>
<p>打开<code>post-list.ejs</code>，在<code>templates/includes</code>目录下，看到<code>&lt;div class=&quot;post gt-bg-theme-color-second&quot;&gt;</code>了吗？在其后直接加入<code>onclick=&quot;window.open('&lt;%= post.link %&gt;','_self')&quot;</code>即可实现点击灰色背景（整个方块）也能在当前窗口跳转至文章页面的效果。</p>
<blockquote>
<p>这行代码的意思是：再点击这个div分区内的任意一处时，不开新窗口，直接跳转到<code>&lt;%= post.link %&gt;</code>这个链接。<code>&lt;%= post.link %&gt;</code>在Gridea生成静态站点时，会自动替换为对应的文章链接。</p>
</blockquote>
<p>此时，这行代码就变成了这样：</p>
<pre><code class="language-html">&lt;div class=&quot;post gt-bg-theme-color-second&quot; onclick=&quot;window.open('&lt;%= post.link %&gt;','_self')&quot;&gt;
</code></pre>
<blockquote>
<p>这种方案的缺点：电脑端可以触发点击事件时鼠标仍为默认状态，用户不知道可以点击。<br>
其实你也可以直接用<code>&lt;a&gt;</code>标签括起来...</p>
</blockquote>
<p><a href="/post/gridea-modify-2022/#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">&gt;返回目录</a></p>
<hr>
<h3 id="添加顶部加载进度条">添加顶部加载进度条</h3>
<p>这个很多博主都在用，js来自GitHub上的<a href="https://github.com/CodeByZach/pace/">pace项目</a></p>
<p>此处贴出我自己的配置（💊 黑白药丸式）</p>
<p>首先，在<code>main.less</code>的末尾的一大堆<code>@import</code>前加上以下的内容：</p>
<pre><code class="language-css">.pace {
  pointer-events: none;
  user-select: none;
  z-index: 2;
  position: fixed;
  margin: auto;
  top: 4px;
  left: 0;
  right: 0;
  height: 8px;
  border-radius: 8px;
  width: 6rem;
  background: #eaecf2;
  overflow: hidden;
}

.pace-inactive .pace-progress {
  opacity: 0;
  transition: 0.3s ease-in;
}

.pace.pace-inactive {
  opacity: 0;
  transition: 0.3s;
  top: -8px;
}

.pace .pace-progress {
  box-sizing: border-box;
  transform: translate3d(0, 0, 0);
  position: fixed;
  z-index: 2;
  display: block;
  position: absolute;
  top: 0;
  right: 100%;
  height: 100%;
  width: 100%;
  background: #49b1f5;
  background: linear-gradient(  //自定义药丸颜色
    to right,
    #bbbbbb,
    #2a3a4a,
  );
  animation: gradient 2s ease infinite;
  background-size: 200%;
}
</code></pre>
<p>值得一提的是，看到<code>自定义药丸颜色</code>的注释了吗？这里后面就可以自定义进度条的颜色了，本例中为从左至右的渐变（靠前项目的为左），可参考<code>linear-gradient</code>的属性进行设置。</p>
<p>除此之外，你还需要再<code>head.ejs</code>中引入下面这段js：</p>
<pre><code class="language-html">&lt;script src=&quot;//cdn.bootcss.com/pace/1.0.2/pace.min.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>至此，渲染页面并预览，你就可以看到顶部出现了 <s>药丸</s> 进度条了！</p>
<p><a href="/post/gridea-modify-2022/#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">&gt;返回目录</a></p>
<hr>
<h3 id="添加返回顶部按钮">添加“返回顶部”按钮</h3>
<p>方案参考自Jinweidy的<a href="https://www.cnblogs.com/wdysblog/p/16610767.html">这篇文章</a></p>
<ol>
<li>在HTML页面底部添加以下的代码，用于显示一个“返回顶部”按钮。</li>
</ol>
<pre><code class="language-html">&lt;div id=&quot;goTopBtn&quot;&gt;&lt;span class=&quot;glyphicon glyphicon-chevron-up&quot;&gt;&amp;Delta;&lt;/span&gt;&lt;/div&gt;
</code></pre>
<ol start="2">
<li>在CSS样式中添加以下的CSS代码，用于控制“返回顶部”按钮的样式。</li>
</ol>
<pre><code class="language-css">#goTopBtn {
    position: fixed;
    line-height: 46px;
    text-align: center;
    width: 46px;
    bottom: 35px;
    height: 46px;
    cursor: pointer;
    background: #fff;
    display: none;
    border-radius: 6px;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.13);
    font-size: 22px;
    color: #999;
}
</code></pre>
<ol start="3">
<li>在网页的底部放上以下的jquery代码，用于控制“返回顶部”按钮什么时候显示，什么时候隐藏。</li>
</ol>
<pre><code class="language-html">&lt;script src=&quot;http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js&quot;&gt;&lt;/script&gt;
    &lt;script&gt;
/*返回顶部*/
$(window).scroll(function(){
   var sc=$(window).scrollTop();
   var rwidth=$(window).width()
   if(sc&gt;0){
    $(&quot;#goTopBtn&quot;).css(&quot;display&quot;,&quot;block&quot;);
    $(&quot;#goTopBtn&quot;).css(&quot;left&quot;,(rwidth-36)+&quot;px&quot;)
   }else{
   $(&quot;#goTopBtn&quot;).css(&quot;display&quot;,&quot;none&quot;);
   }
 })
 $(&quot;#goTopBtn&quot;).click(function(){
   var sc=$(window).scrollTop();
   $('body,html').animate({scrollTop:0},500);
 })
   &lt;/script&gt;
</code></pre>
<blockquote>
<p>注：根据原作者的协议，我没办法在上面的文字中补充，只能在这里来提示你一下，css改在<code>main.less</code>里面，具体是在最后的一大堆<code>@import</code>之前，要添加的<code>div</code>我放在了<code>&lt;div class=&quot;site-footer gt-c-content-color-first&quot;&gt;</code>的最后一行，第三步中的<code>jquery</code>代码放在了<code>&lt;/footer&gt;</code>之前。<br>
记得在<code>&lt;head&gt;</code>中引入jquery哦！引入如：<code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js&quot;&gt;&lt;/script&gt;</code><br>
还是那句话，我的方法仅供参考哦~</p>
</blockquote>
<p><a href="/post/gridea-modify-2022/#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">&gt;返回目录</a></p>
<hr>
<h3 id="为控制台添加字符画">为控制台添加字符画</h3>
<p>不知你是否在<s>睿站</s>B站的页面按下过<code>F12</code>，如果有的话，那么你会发现其实B站在控制台页面打印了一副如下图的字符画：</p>
<figure data-type="image" tabindex="1"><img src="https://static.daoblog.top/5115/202301012232684.png" alt="img" loading="lazy"></figure>
<p>“字符画如彩蛋般的出现在眼前，还能丰富网站的维度，一个优秀的网站也许在某个不起眼的角落也能带给你惊喜。”</p>
<p>我的方法来自<a href="https://hassanwong.top/posts/7a58550e/">Harris's Blog</a></p>
<p>要实现这种效果，首先，我们需要你在Gridea的工作目录下新建一个js文件，为了便于日后管理，我新建了一个名为<code>js</code>的文件夹，然后在其内部新建了一个名为<code>console-text.js</code>的文件。</p>
<p>代码模板如下：</p>
<pre><code class="language-js">if (window.console) {
  Function.prototype.makeMulti = function () {
    let l = new String(this);
    l = l.substring(l.indexOf(&quot;/*&quot;) + 3, l.lastIndexOf(&quot;*/&quot;));
    return l;
  };
  let string = function () {
    /*
我是字符画
    */
  };
  console.log(string.makeMulti());
}
</code></pre>
<p>将代码中的<code>我是字符画</code>部分替换为你要使用的字符画即可。</p>
<p>接下来，如果你还想的话，也可以添加一点自定义文字：</p>
<pre><code class="language-diff">    */ }
    console.log(string.makeMulti());
+	console.log(&quot;&lt;Custom&gt;&quot;);
</code></pre>
<p>我添加的代码为：</p>
<pre><code class="language-js">console.log(&quot;欢迎访问%cYandao's Blog&quot;, &quot;color:#1fc7b6;font-weight:bold&quot;);
</code></pre>
<p>最后，在<code>head.ejs</code>中引入js即可：</p>
<pre><code class="language-html">&lt;script defer type=&quot;text/javascript&quot; src=&quot;https://www.daoblog.top/js/console-text.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p><a href="/post/gridea-modify-2022/#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">&gt;返回目录</a></p>
<hr>
<h3 id="排版自动优化">排版自动优化</h3>
<p>很多同学看到文章中文英文之间没有空格，会很难受，可是很多文章中文英文之间没有空格，那么<code>pangu.js</code>还可以拯救你一下。</p>
<p>首先在<code>head.ejs</code>中引入下方的代码：</p>
<pre><code class="language-html">&lt;script src=&quot;https://cdn.jsdelivr.net/npm/pangu.simple@1.0.5/dist/browser/pangu.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p><mark>注意</mark>：上方引入的为<code>pangu.simple.js</code>，非原版<code>pangu.js</code>，其优化了大陆用户的排版需求，原版的引入如下：</p>
<pre><code class="language-html">&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/pangu/4.0.7/pangu.min.js&quot;&gt;&lt;/script&gt;
</code></pre>
<blockquote>
<p>你可以将<code>cdnjs.cloudflare.com</code>替换为<code>cdnjs.loli.net</code>来确保中国大陆用户的体验。</p>
</blockquote>
<p>接下来，在整个网页加载完毕时，如在<code>footer.ejs</code>的末尾调用它即可</p>
<pre><code class="language-html">&lt;script&gt;
  pangu.spacingPage(); /*全局应用pangu.js*/
&lt;/script&gt;
</code></pre>
<p>注意：上面这种用法会对全局进行修改，如果你只想修改正文之类的，请按<code>F12</code>查看你博客对应的元素，下面是一种仅修改<code>post-content</code>（博客正文）与<code>p</code>标签的调用方法</p>
<pre><code class="language-html">&lt;script&gt;
    pangu.spacingElementByClassName('post-content');
    pangu.spacingElementByTagName('p');
/*参考这两句，你可以写出适合你实际情况的语法*/
&lt;/script&gt;
</code></pre>
<p><a href="/post/gridea-modify-2022/#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">&gt;返回目录</a></p>
<hr>
<h3 id="为网站底部添加运行时间">为网站底部添加运行时间</h3>
<p>首先，在<code>footer.ejs</code>中合适的位置添加以下代码：</p>
<pre><code class="language-html">&lt;span id=&quot;runtime_span&quot;&gt;&lt;/span&gt;
</code></pre>
<p>接着，在底部合适的位置插入这样一句<code>script</code>：</p>
<pre><code class="language-html">&lt;script&gt;
    function show_runtime() {window.setTimeout(&quot;show_runtime()&quot;,1000); X=new Date(&quot;11/12/2021 11:45:14&quot;); Y=new Date(); T=(Y.getTime()-X.getTime()); M=24*60*60*1000; a=T/M;A=Math.floor(a); b=(a-A)*24;B=Math.floor(b); c=(b-B)*60;C=Math.floor((b-B)*60); D=Math.floor((c-C)*60); runtime_span.innerHTML=&quot;本站已运行: &quot;+A+&quot;天&quot;+B+&quot;小时&quot;+C+&quot;分&quot;+D+&quot;秒&quot;}show_runtime();  Date(&quot;11/12/2021 11:45:14&quot;) 
&lt;/script&gt;
</code></pre>
<p>把里面的<code>11/12/2021 11:45:14</code>替换为你的站点的创建时间即可，格式为<code>月/日/年 小时:分:秒</code></p>
<p><a href="/post/gridea-modify-2022/#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">&gt;返回目录</a></p>
<hr>
<h3 id="添加自定义鼠标指针">添加自定义鼠标指针</h3>
<blockquote>
<p>请注意：此功能对手机浏览的用户不友好，存在bug，慎用！</p>
</blockquote>
<p>来自此处的 <a href="https://zhuanlan.zhihu.com/p/351951477">知乎文章</a></p>
<p>简而言之：在Gridea工作目录的<code>static</code>文件夹下新建<code>js</code>文件夹，再在其内部新建一个名为<code>mouse.js</code>的文件，填入以下内容：</p>
<pre><code class="language-js">var CURSOR;

Math.lerp = (a, b, n) =&gt; (1 - n) * a + n * b;

const getStyle = (el, attr) =&gt; {
    try {
        return window.getComputedStyle
            ? window.getComputedStyle(el)[attr]
            : el.currentStyle[attr];
    } catch (e) {}
    return &quot;&quot;;
};

class Cursor {
    constructor() {
        this.pos = {curr: null, prev: null};
        this.pt = [];
        this.create();
        this.init();
        this.render();
    }

    move(left, top) {
        this.cursor.style[&quot;left&quot;] = `${left}px`;
        this.cursor.style[&quot;top&quot;] = `${top}px`;
    }

    create() {
        if (!this.cursor) {
            this.cursor = document.createElement(&quot;div&quot;);
            this.cursor.id = &quot;cursor&quot;;
            this.cursor.classList.add(&quot;hidden&quot;);
            document.body.append(this.cursor);
        }

        var el = document.getElementsByTagName('*');
        for (let i = 0; i &lt; el.length; i++)
            if (getStyle(el[i], &quot;cursor&quot;) == &quot;pointer&quot;)
                this.pt.push(el[i].outerHTML);

        document.body.appendChild((this.scr = document.createElement(&quot;style&quot;)));
        this.scr.innerHTML = `* {cursor: url(&quot;data:image/svg+xml,&lt;svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8' width='8px' height='8px'&gt;&lt;circle cx='4' cy='4' r='4' opacity='.5'/&gt;&lt;/svg&gt;&quot;) 4 4, auto}`;
    }

    refresh() {
        this.scr.remove();
        this.cursor.classList.remove(&quot;hover&quot;);
        this.cursor.classList.remove(&quot;active&quot;);
        this.pos = {curr: null, prev: null};
        this.pt = [];

        this.create();
        this.init();
        this.render();
    }

    init() {
        document.onmouseover  = e =&gt; this.pt.includes(e.target.outerHTML) &amp;&amp; this.cursor.classList.add(&quot;hover&quot;);
        document.onmouseout   = e =&gt; this.pt.includes(e.target.outerHTML) &amp;&amp; this.cursor.classList.remove(&quot;hover&quot;);
        document.onmousemove  = e =&gt; {(this.pos.curr == null) &amp;&amp; this.move(e.clientX - 8, e.clientY - 8); this.pos.curr = {x: e.clientX - 8, y: e.clientY - 8}; this.cursor.classList.remove(&quot;hidden&quot;);};
        document.onmouseenter = e =&gt; this.cursor.classList.remove(&quot;hidden&quot;);
        document.onmouseleave = e =&gt; this.cursor.classList.add(&quot;hidden&quot;);
        document.onmousedown  = e =&gt; this.cursor.classList.add(&quot;active&quot;);
        document.onmouseup    = e =&gt; this.cursor.classList.remove(&quot;active&quot;);
    }

    render() {
        if (this.pos.prev) {
            this.pos.prev.x = Math.lerp(this.pos.prev.x, this.pos.curr.x, 0.15);
            this.pos.prev.y = Math.lerp(this.pos.prev.y, this.pos.curr.y, 0.15);
            this.move(this.pos.prev.x, this.pos.prev.y);
        } else {
            this.pos.prev = this.pos.curr;
        }
        requestAnimationFrame(() =&gt; this.render());
    }
}

(() =&gt; {
    CURSOR = new Cursor();
    // 需要重新获取列表时，使用 CURSOR.refresh()
})();
</code></pre>
<p>接着，在<code>main.less</code>中最后的一大堆<code>@import</code>前插入以下内容：</p>
<pre><code class="language-css">#cursor {
    position: fixed;
    width: 16px;
    height: 16px;
    background: #000;
    border-radius: 8px;
    opacity: 0.25;
    z-index: 10086;
    pointer-events: none;
    transition: 0.2s ease-in-out;
    transition-property: background, opacity, transform;
}

#cursor.hidden {
    opacity: 0;
}

#cursor.hover {
    opacity: 0.1;
    transform: scale(2.5);
}

#cursor.active {
    opacity: 0.5;
    transform: scale(0.5);
}
</code></pre>
<p>最后一步！在<code>head.ejs</code>中插入以下内容：</p>
<pre><code class="language-html">&lt;script defer type=&quot;text/javascript&quot; src=&quot;/js/mouse.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>大功告成！</p>
<p><a href="/post/gridea-modify-2022/#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">&gt;返回目录</a></p>
<hr>
<h3 id="添加复制弹窗">添加复制弹窗</h3>
<blockquote>
<p>请注意：目前此功能与自定义鼠标指针存在冲突，用户如果与弹窗进行了互动，会导致指针出现bug，目前我还在钻研，如果你介意，请不要使用此种弹窗方法</p>
</blockquote>
<p>参考自 <a href="https://blog.trfox.ml/p/71e4d414dfa8/">Teror的客栈</a></p>
<p>首先，在<code>head.ejs</code>中添加如下代码：</p>
<pre><code class="language-html">&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.loli.net/ajax/libs/izitoast/1.4.0/css/iziToast.min.css&quot;&gt;
&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/izitoast/1.4.0/js/iziToast.min.js&quot; integrity=&quot;sha512-Zq9o+E00xhhR/7vJ49mxFNJ0KQw1E1TMWkPTxrWcnpfEFDEXgUiwJHIKit93EW/XxE31HSI5GEOW06G6BF1AtA==&quot; crossorigin=&quot;anonymous&quot; referrerpolicy=&quot;no-referrer&quot;&gt;&lt;/script&gt;
</code></pre>
<p>接着，在<code>footer.ejs</code>的末尾添加如下代码即可：</p>
<pre><code class="language-html">&lt;script&gt;
  document.body.oncopy = function (){
      iziToast.info({
          timeout: 2000,  //注：弹窗持续时间，单位为毫秒
          icon: 'Fontawesome', 
          closeOnEscape: 'true', 
          transitionIn: 'bounceInLeft', 
          transitionOut: 'fadeOutRight',
          displayMode: 'replace', 
          layout: '2', 
          position: 'topRight',
          icon: 'fad fa-copy',
          backgroundColor: '#fff', 
          title: '复制成功', 
          message: '未经许可，请勿转载 
      });
  }
&lt;/script&gt;
</code></pre>
<p><a href="/post/gridea-modify-2022/#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">&gt;返回目录</a></p>
<hr>
<h3 id="替换为动态友链github-pr提交友链">替换为动态友链+GitHub PR提交友链</h3>
<blockquote>
<p>这部分内容巨长，将写作为另一篇单独的文章。</p>
</blockquote>
<p><a href="/post/gridea-modify-2022/#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95">&gt;返回目录</a></p>
<hr>
<h3 id="instantpage页面加速">instant.page页面加速</h3>
<p>在<code>&lt;/body&gt;</code>前插入如下内容即可</p>
<pre><code class="language-html">&lt;script src=&quot;//instant.page/5.1.1&quot; type=&quot;module&quot; integrity=&quot;sha384-MWfCL6g1OTGsbSwfuMHc8+8J2u71/LA8dzlIN3ycajckxuZZmF+DNjdm7O6H3PSq&quot;&gt;&lt;/script&gt;
</code></pre>
<hr>
<h2 id="whats-next">What's next?</h2>
<blockquote>
<p>其实还有很多功能想做...</p>
</blockquote>
<p>魔改是肯定没有尽头的啦，我目前还在探索中，看到我自己想要的功能就会去试一试的啦~</p>
<p>如果你有疑问或者建议，欢迎在评论区告诉我~</p>
<p>❤️ 爱来自中国，⏚ 接 地 ⏚</p>

                </div>
                </div>
            </article>
        </div>
        
            <div class="next-post">
                <div class="next gt-c-content-color-first" data-cursor="text">下一篇</div>
                <a href="https://www.daoblog.top/post/COVID-19_1st_time/" class="post-title gt-a-link" data-cursor="block">
                    【施工中】我的新冠阳性日记
                </a>
            </div>
        

        

        

        
            <!--<script src='https://doge.jsdelivr.daoblog.top/npm/valine/dist/Valine.min.js'></script>-->

<style>
	div#waline{
		width:100%;
		max-width: 1050px;
		padding: 2.5%;
		font-family: "Noto Serif SC";
	}
	:root {
        --waline-font-size: 18px;
		font-family: "Noto Serif SC";
		--waline-font-family: "Noto Serif SC";
    }
	span.katex { font-size: 18px; }
	.wl-emoji-popup { font-size: 16px !important; }
	.wl-emoji-popup button { height: 2em; }
	.wl-panel {
	    background: #6b938914 !important;
    }
	.wl-editor {
	    background-color: rgba(83, 131, 130, 0.13) !important;
	}
</style>


	<!--<div id="vcomments"></div>-->
	<div id="waline"></div>

<script type="module">
	// Settings for Valine (For Original Theme)
	// new Valine({
	// 	el: '#vcomments',
	//	appId: 'bAd7RExcBmuv1CJq53BAcHVv-gzGzoHsz',
	//	appKey: 'g7dYw8npvGrgorSgGa4AH8L0',
	//	avatar: 'retro',
	//	pageSize: 10,
	//	recordIp: true,
	//	placeholder: 'ヽ(○´∀`)ﾉ♪  这里可评论哦~',
	//	visitor: false,
	//});
	import { init } from 'https://doge.unpkg.daoblog.top/@waline/client@v2/dist/waline.mjs';
	init({
      el: '#waline',
      serverURL: 'https://waline.ydlk.cc',
	  avatar: 'retro',
	  recordIp: true,
	  reaction: false,
	  pageview: true,
	  comment: true,
	  emoji: [
      //'//doge.unpkg.daoblog.top/@waline/emojis@1.1.0/bmoji',
      '//doge.unpkg.daoblog.top/@waline/emojis@1.1.0/bilibili',
	  '//doge.jsdelivr.daoblog.top/npm/sticker-heo@2022.7.5/Sticker-100/',
    ],
	//reaction: [
    //'https://doge.unpkg.daoblog.top/@waline/emojis@1.1.0/bilibili/bb_sunglasses.png',
    //'https://doge.unpkg.daoblog.top/@waline/emojis@1.1.0/bilibili/bb_thumbsup.png',
    //'https://doge.unpkg.daoblog.top/@waline/emojis@1.1.0/bilibili/bb_doge.png',	
	//'https://doge.unpkg.daoblog.top/@waline/emojis@1.1.0/bilibili/bb_confused.png',
	//'https://doge.unpkg.daoblog.top/@waline/emojis@1.1.0/bilibili/bb_sweat.png',
    //'https://doge.unpkg.daoblog.top/@waline/emojis@1.1.0/bilibili/bb_sleepy.png',
  //],
	  dark: false,
	  recaptchaV3Key: "6LeicsQjAAAAAJpXhbQ4zMFDSj31XQqTI_2St5ZP",
	  copyright: false,
    });
</script>
<!--<script>
    var versionNo = '1.1.1';
    if(!window.localStorage.getItem('update-version') || window.localStorage.getItem('update-version') !=versionNo){
        window.localStorage.setItem('update-version',versionNo)
        alert('友情提示：我站已强制开启评论验证，请先在评论区点击登录，再进行评论，否则无法使用评论')
    }
</script>-->

        

        <!--<script src="https://fastly.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js"></script>-->
<script>
    pangu.spacingPage();
</script>
<script 
  data-host-id="1" 
  data-close-width="48" 
  data-close-height="48" 
  data-open-width="380" 
  data-open-height="680" 
  src="https://chat.origin.yandao.cloud/widget.js" 
  async ></script>
<div class="site-footer gt-c-content-color-first">
    <!--<div class="slogan gt-c-content-color-first">Old Personal blog website of Kris Yan</div>-->
    <p data-cursor="text">【一言】</p><p id="hitokoto" data-cursor="text">😀 一言模块正在加载......</p>
    <div class="social-container">
        
            
        
            
        
            
        
            
        
            
        
            
        
    </div>
    
    <div class="footer-info" data-cursor="text">
        
    </div>
    <p><a href="https://beian.miit.gov.cn/" target="_blank" data-cursor="block">蜀ICP备2022002434号-1</a> | <a href="https://icp.gov.moe/?keyword=20220054" target="_blank" data-cursor="block">萌ICP备20220054号</a> | <a href="https://www.daoblog.top/post/privacy/" target="_blank" data-cursor="block">隐私</a> | <a href='javascript:AutoHan_StranBody()' id='StranLink' data-cursor="block">切换繁体</a><br />
    <br />
    <span id="runtime_span"></span>
    <div>
        <p data-cursor="text">同时提供：<a href="https://www.daoblog.top/atom.xml" target="_blank" data-cursor="block">RSS</a> | Made with ❤️ by <a href="https://krisyan.dev/" target="_blank" data-cursor="block">Kris Yan</a> | <!--Power by <a href="https://vercel.com?utm_source=powered-by-vercel" target="_blank" data-cursor="block">Vercel</a> | --><span id="busuanzi_container_site_pv" data-cursor="text">总访问量<span id="busuanzi_value_site_pv"></span>次</span></p>
        <p data-cursor="text">Copyright © 2021-2023 <a href="https://krisyan.dev/" target="_blank" data-cursor="block">Kris Yan</a>. All Rights Reserved. | <a href="https://www.daoblog.top/post/changelog/" data-cursor="block">Theme</a></p>
    </div>
    <div id="goTopBtn" data-cursor="block"><span class="glyphicon glyphicon-chevron-up">&Delta;</span></div>
</div>
<!--<script src="https://www.daoblog.top/asoul-l2d.js"></script>-->
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script>
    /*返回顶部*/
    $(window).scroll(function(){
       var sc=$(window).scrollTop();
       var rwidth=$(window).width()
       if(sc>0){
        $("#goTopBtn").css("display","block");
        $("#goTopBtn").css("left",(rwidth-36)+"px")
       }else{
       $("#goTopBtn").css("display","none");
       }
     })
     $("#goTopBtn").click(function(){
       var sc=$(window).scrollTop();
       $('body,html').animate({scrollTop:0},500);
     })
</script>
<script src="https://yandaostatus.statuspage.io/embed/script.js"></script>
<script>
    function show_runtime() {window.setTimeout("show_runtime()",1000); X=new Date("11/12/2021 11:45:014"); Y=new Date(); T=(Y.getTime()-X.getTime()); M=24*60*60*1000; a=T/M;A=Math.floor(a); b=(a-A)*24;B=Math.floor(b); c=(b-B)*60;C=Math.floor((b-B)*60); D=Math.floor((c-C)*60); runtime_span.innerHTML="本站已运行: "+A+"天"+B+"小时"+C+"分"+D+"秒"}show_runtime();  Date("11/12/2021 11:45:14") 
</script>
<!--<script src="https://doge.unpkg.daoblog.top/petite-vue"></script>
<script src="https://static.daoblog.top/5115/index.bundle.js"></script>
<script src="https://www.daoblog.top/music.js"></script>-->
<script>
  hljs.highlightAll()
</script>
<script>
    document.body.oncopy = function (){
        iziToast.info({
            timeout: 2000,
            icon: 'Fontawesome', 
            closeOnEscape: 'true', 
            transitionIn: 'bounceInLeft', 
            transitionOut: 'fadeOutRight',
            displayMode: 'replace', 
            layout: '2', 
            position: 'topRight',
            icon: 'fad fa-copy',
            backgroundColor: '#fff', 
            title: '复制成功', 
            message: '未经许可，请勿转载' 
        });
    }
</script>
<!--<script>
    let lantern = new Lantern('lantern-wrapper', {
        date: {								// 日期格式：'月-日'
            from: '12-20',					// 开始悬挂灯笼的日期
            to: '1-31'						// 结束悬挂灯笼的日期
        },
        postion: {
            zIndex: 9999,					// 整个灯笼的 z-index 属性
            lanternRL: [10, 150, 150, 10],	// 灯笼距离边界的距离：左侧灯笼距离左边的距离，右侧登录距离右侧的距离；页面灯笼从左往右依次设置
            lanternTop: 0					// 灯笼距离顶部的距离。你也可以使用数组从左往右依次设置每个灯笼的距顶距离，例如：[0, 100, 200, 300]
        },
        content: '新年快乐'					 // 灯笼内显示的文字，只会截取前四个字符
    });
</script>-->
<script type="module">
    import cursor from "https://doge.unpkg.daoblog.top/ipad-cursor@latest"

    // 判断用户为桌面端时执行 cursor.initCursor()
    function isDesktop() {
      return window.matchMedia("(min-width: 992px)").matches;
    }

    if (isDesktop()) {
      cursor.initCursor();
    }
</script>
<script src="https://www.daoblog.top/js/Std_StranJF.js" integrity="sha384-dCV+UmPZoyu+EQKH2Feh0Omt4XRyIZT8QOsbFvLIr022OVZg9WmgIctnlHCnEJiX" crossorigin="anonymous"></script>
    </div>
</div>
<script src="//instant.page/5.1.1" type="module" integrity="sha384-MWfCL6g1OTGsbSwfuMHc8+8J2u71/LA8dzlIN3ycajckxuZZmF+DNjdm7O6H3PSq"></script>
<link rel="stylesheet" href="https://doge.jsdelivr.daoblog.top/gh/zhheo/Post-Abstract-AI@0.11/tianli_gpt.css">
<script>
    let tianliGPT_postSelector = '.post-detail .post-content';
    let tianliGPT_key = 'va2Tg5QtTPe1nIjpH1yS';
</script>
<script src="https://doge.jsdelivr.daoblog.top/gh/zhheo/Post-Abstract-AI@0.11/tianli_gpt.js"></script>
<script>
    var tianl1GPT = document.getElementById("tianliGPT-tag");
    var content = tianl1GPT.innerHTML;
    content = content.replace("TianliGPT", "ShirokoAI");
    tianl1GPT.innerHTML = content;   
</script>
<script>
// 获取文章ID
var url = window.location.href;
var id = url.match(/\/post\/([^/]+)/)[1];

// 创建标签和播放器
var tagDiv = document.createElement('div');
tagDiv.className = 'tianliGPT-tag';
tagDiv.id = 'tianliGPT-tag';
tagDiv.setAttribute('data-cursor', 'block');
tagDiv.innerHTML = '日语朗读';
tagDiv.addEventListener('click', toggleAudio);

// 获取标题元素
var titleDiv = document.querySelector('.tianliGPT-title-text');

// 设置样式使标签紧挨在标题右边
tagDiv.style.display = 'inline-block';

// 将标签插入到目标元素旁边
titleDiv.parentNode.insertBefore(tagDiv, titleDiv.nextSibling);

// 音频播放器
var audio = new Audio();
audio.src = 'https://static.daoblog.top/vits/' + id + '.mp3';
audio.volume = 0.75; // 设置音量为百分之75

function toggleAudio() {
  if (audio.paused) {
    audio.play();
  } else {
    audio.pause();
  }
}
</script>
<script>
// 获取需要添加属性的元素
const explanationDiv = document.querySelector('.tianliGPT-explanation');
const titleIcon = document.querySelector('.tianliGPT-title-icon i');
const titleTextDiv = document.querySelector('.tianliGPT-title-text');
const tagDiv = document.querySelector('#tianliGPT-tag');

// 为元素添加 data-cursor 属性
explanationDiv.setAttribute('data-cursor', 'text');
titleIcon.setAttribute('data-cursor', 'block');
titleTextDiv.setAttribute('data-cursor', 'text');
tagDiv.setAttribute('data-cursor', 'block');

</script>
</body>
</html>
